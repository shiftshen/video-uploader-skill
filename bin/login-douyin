#!/usr/bin/env python3
"""
Douyin Login Helper - Login to Douyin Creator Center

Usage:
    python3 bin/login_douyin.py
"""

import asyncio
from pathlib import Path
import sys

# Add scripts directory to path
SCRIPTS_DIR = Path(__file__).parent.parent / "scripts"
sys.path.insert(0, str(SCRIPTS_DIR))

from douyin_uploader.main import douyin_cookie_gen

# Credentials directory
SKILL_DIR = Path(__file__).parent.parent
ACCOUNT_FILE = SKILL_DIR / "credentials" / "douyin" / "storage.json"


async def login():
    print("=" * 60)
    print("æŠ–éŸ³åˆ›ä½œè€…ä¸­å¿ƒç™»å½•")
    print("=" * 60)
    print()
    print(f"Cookie ä¿å­˜ä½ç½®: {ACCOUNT_FILE}")
    print()
    
    if ACCOUNT_FILE.exists():
        print(f"ğŸ“ å‘ç°å·²æœ‰ Cookie æ–‡ä»¶ ({ACCOUNT_FILE.stat().st_size} bytes)")
        print()
    
    print("æ­¥éª¤:")
    print("  1. æµè§ˆå™¨å°†æ‰“å¼€æŠ–éŸ³åˆ›ä½œè€…ä¸­å¿ƒ")
    print("  2. ä½¿ç”¨æ‰‹æœºæ‰«ç ç™»å½•")
    print("  3. ç™»å½•æˆåŠŸåæµè§ˆå™¨ä¼šè‡ªåŠ¨å…³é—­")
    print()
    print("-" * 60)
    
    # å¼€å§‹ç™»å½•æµç¨‹
    await douyin_cookie_gen(str(ACCOUNT_FILE))
    
    if ACCOUNT_FILE.exists():
        print()
        print("=" * 60)
        print(f"âœ… ç™»å½•æˆåŠŸï¼Cookie å·²ä¿å­˜ ({ACCOUNT_FILE.stat().st_size} bytes)")
        print("=" * 60)
    else:
        print()
        print("=" * 60)
        print("âŒ Cookie æœªä¿å­˜ï¼Œè¯·é‡è¯•")
        print("=" * 60)


if __name__ == "__main__":
    asyncio.run(login())
